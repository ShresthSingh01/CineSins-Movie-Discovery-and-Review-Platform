<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CineSins - Guilty Pleasures Unmasked</title>

  <!-- Fonts: Playfair Display for Headings, Inter for Body, Outfit for Branding -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Outfit:wght@100..900&display=swap"
    rel="stylesheet">

  <!-- Core Theme & Design System -->
  <link rel="stylesheet" href="styles/vars.css">
  <link rel="stylesheet" href="styles/palette.css">
  <link rel="stylesheet" href="styles/base.css">
  <link rel="stylesheet" href="styles/layout.css">
  <link rel="stylesheet" href="styles/components.css">
  <link rel="stylesheet" href="styles/animations.css">

  <link rel="stylesheet" href="styles.css?v=5">
  <link rel="manifest" href="manifest.json?v=5">

  <script type="module" src="main.js?v=5"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <style>
    @media (max-width: 900px) {
      #review-modal .modal-content {
        flex-direction: column !important;
        height: 90vh !important;
        width: 100% !important;
      }

      #review-modal .modal-content>div:first-child {
        width: 100% !important;
        min-width: 100% !important;
        height: 300px !important;
        min-height: 300px !important;
      }

      #review-modal .modal-content>div:last-child {
        padding: 24px !important;
      }

      #review-modal #modal-title {
        font-size: 2rem !important;
      }
    }

    #watchlist-btn:hover {
      background: rgba(255, 255, 255, 0.05) !important;
      border-color: #fff !important;
    }

    #save-review:hover {
      transform: translateY(-2px);
      filter: brightness(1.1);
    }

    #close-modal:hover {
      transform: rotate(90deg) scale(1.1);
      background: rgba(255, 255, 255, 0.1) !important;
      border-color: #fff !important;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
    }
  </style>
</head>

<body>
  <!-- Preloader -->
  <div id="loader-wrapper">
    <div class="loader-content">
      <div class="loader-logo">
        <svg class="brand-logo loader-svg" width="90" height="90" viewBox="0 0 100 100" fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <!-- The Film S -->
          <path d="M75 25C75 10 30 15 30 35C30 55 70 45 70 70C70 90 25 85 25 75" stroke="url(#logo_grad_s_loader)"
            stroke-width="14" stroke-linecap="round" stroke-linejoin="round" />
          <!-- Perforations -->
          <path d="M75 25C75 10 30 15 30 35C30 55 70 45 70 70C70 90 25 85 25 75" stroke="#111" stroke-width="6"
            stroke-dasharray="2 6" stroke-linecap="butt" />
          <defs>
            <linearGradient id="logo_grad_s_loader" x1="25" y1="15" x2="75" y2="85" gradientUnits="userSpaceOnUse">
              <stop stop-color="#cc0000" />
              <stop offset="1" stop-color="#660000" />
            </linearGradient>
          </defs>
        </svg>
        <div style="margin-top: 15px; font-weight: 900; letter-spacing: 5px; text-transform: uppercase;">
          <span style="color:#fff; font-family: 'Outfit', sans-serif;">CINE</span><span
            style="color:#ff0000; font-family: 'Outfit', sans-serif;">SINS</span>
        </div>
      </div>
      <div class="loader-bar-container">
        <div class="loader-bar" id="loader-bar"></div>
      </div>
      <p class="loader-text">Projecting your experience...</p>
    </div>
  </div>

  <!-- Ambient Glow Cursor -->
  <div class="cursor-glow" id="cursor-glow"></div>

  <header id="header">
    <div class="container header-content">
      <a href="#" class="logo-container" data-section="home"
        style="text-decoration: none; display: flex; align-items: center; gap: 12px;">
        <div class="brand-vibe" style="position: relative; display: flex; align-items: center;">
          <svg class="brand-logo" width="40" height="40" viewBox="0 0 100 100" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path d="M75 25C75 10 30 15 30 35C30 55 70 45 70 70C70 90 25 85 25 75" stroke="url(#logo_grad_s)"
              stroke-width="15" stroke-linecap="round" stroke-linejoin="round" />
            <defs>
              <linearGradient id="logo_grad_s" x1="25" y1="15" x2="75" y2="85" gradientUnits="userSpaceOnUse">
                <stop stop-color="#ff0000" />
                <stop offset="1" stop-color="#440000" />
              </linearGradient>
            </defs>
          </svg>
        </div>
        <div style="display: flex; flex-direction: column; line-height: 0.9;">
          <div
            style="font-family: 'Outfit', sans-serif; font-weight: 900; font-size: 1.6rem; letter-spacing: -1px; color: #fff;">
            CINE<span style="color: #ff0000;">SINS</span>
          </div>
          <div
            style="font-size: 0.55rem; color: #888; letter-spacing: 1.5px; text-transform: uppercase; font-weight: 700; margin-top: 2px;">
            GUILTY PLEASURES. UNMASKED.</div>
        </div>
      </a>

      <button id="mobile-menu-btn" class="mobile-menu-btn"><i class="fas fa-bars"></i></button>
      <nav id="main-nav">
        <ul>
          <li><a href="#" data-section="home" class="active">Home</a></li>
          <li><a href="#" data-section="hidden-gems">Hidden Gems</a></li>
          <li><a href="#" data-section="cinesins-dna">CineSins DNA</a></li>
          <li><a href="#" data-section="regions">Regions</a></li>
          <li><a href="#" data-section="decision-mode" id="nav-decision-mode">Decision Mode</a></li>
          <li><a href="#" data-section="reviews">Reviews</a></li>
          <li><a href="#" data-section="watchlist">Watchlist</a></li>
        </ul>
      </nav>

      <div id="status-badges" style="display: flex; align-items: center; gap: 10px;">
        <div id="offline-badge"
          style="display:none; background:var(--accent-secondary); color:#000; padding:4px 12px; border-radius:var(--radius-round); font-size:0.75rem; font-weight:700;">
          Offline</div>
        <button id="install-btn"
          style="display:none; background:var(--accent-tertiary); color:#000; padding:6px 16px; border:none; border-radius:var(--radius-round); font-weight:700; cursor:pointer; font-size:0.8rem;">Install</button>
      </div>
      <input type="file" id="import-file" style="display:none;" accept=".json">
    </div>
  </header>

  <!-- Home Section -->
  <section id="home" class="page-section active" style="padding-top: 0;">
    <div class="hero-section">
      <div class="hero-content container">
        <h1 class="hero-title">
          UNMASK YOUR <br><span>CINEMATIC SINS</span>
        </h1>

        <p class="hero-subtitle">
          Transcend the algorithm. Discover the masterpieces you were meant to love, hidden beneath the mainstream
          noise. Your journey starts with a single sin.
        </p>

        <div class="search-container hero-search" role="search">
          <div class="autocomplete-wrapper">
            <input type="text" id="search-input" placeholder="What is your current cinematic craving?"
              autocomplete="off">
          </div>
          <button id="ai-toggle-btn" class="search-btn ai-toggle" title="Toggle AI Discovery">
            <i class="fas fa-brain"></i>
          </button>
          <button id="search-btn" class="search-btn">SEARCH</button>
        </div>

        <div class="premium-cta-group">
          <button id="zero-scroll-cta" class="premium-btn">
            <i class="fas fa-magic" style="color: #ff0000;"></i> Find Tonight's Three
          </button>
        </div>

        <div id="ai-search-hint"
          style="display: none; margin-top: 40px; padding: 20px 35px; background: rgba(255,0,0,0.12); border: 1px solid rgba(255,0,0,0.3); border-radius: 18px; font-size: 1.05rem; color: #fff; animation: fadeIn 0.5s cubic-bezier(0.16, 1, 0.3, 1);">
          <i class="fas fa-brain" style="color: #ff0000; margin-right: 20px; font-size: 1.4rem;"></i>
          <strong>Discovery Engine Active</strong> — Describe a mood, a deep scene detail, or a dream.
        </div>
      </div>
    </div>

    <div class="container" style="padding-bottom: 100px;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 50px;">
        <div>
          <h2 class="section-title" style="text-align: left; margin: 0; font-size: 2rem;">Trending <span
              style="color: #ff0000;">Sins</span></h2>
          <p style="color: #666; margin-top: 5px;">The most searched masterpieces in the last 24 hours.</p>
        </div>
        <div class="recent-searches-pill" style="display: flex; gap: 8px; flex-wrap: wrap;" id="recent-list"></div>
      </div>

      <div id="movie-results" class="movie-grid" aria-live="polite"></div>
    </div>
  </section>

  <!-- Hidden Gems Section -->
  <section id="hidden-gems" class="page-section">
    <div class="container">
      <div style="text-align: center; margin-bottom: 48px;">
        <h2 class="section-title"><i class="fas fa-gem"
            style="color: var(--accent-secondary); margin-right: 12px;"></i>Hidden Gems</h2>
        <p style="color: var(--text-muted); max-width: 600px; margin: 12px auto 0;">Critically acclaimed masterpieces
          that flew under the mainstream radar. Each gem comes with an AI-curated reason why it deserves your attention.
        </p>
      </div>
      <div id="hidden-gems-results" class="gems-grid" aria-live="polite"></div>
    </div>
  </section>

  <!-- Regions Section -->
  <section id="regions" class="page-section">
    <div class="container">
      <h2 class="section-title">Explore by Region</h2>
      <p style="text-align: center; color: var(--text-muted); margin-bottom: 40px;">Discover the rich diversity of
        global cinema.</p>

      <div id="regions-container" style="display: flex; flex-direction: column; gap: 20px;">
        <!-- Regions rendered dynamically -->
      </div>
    </div>
  </section>

  <!-- Reviews Section -->
  <section id="reviews" class="page-section">
    <div class="container">
      <h2 class="section-title">My Reviews</h2>
      <p style="text-align: center; color: var(--text-muted); margin-bottom: 48px;">Your personal journey through
        cinema.</p>
      <div id="reviews-list" class="movie-grid" aria-live="polite"></div>
    </div>
  </section>

  <!-- Watchlist Section -->
  <section id="watchlist" class="page-section">
    <div class="container">
      <h2 class="section-title">My Watchlist</h2>
      <p style="text-align: center; color: var(--text-muted); margin-bottom: 48px;">Movies waiting for your next movie
        night.</p>
      <div id="watchlist-list" class="movie-grid" aria-live="polite"></div>
    </div>
  </section>

  <!-- CineSins DNA Section (Bento Grid) -->
  <section id="cinesins-dna" class="page-section">
    <div class="container">
      <h2 class="section-title">CineSins DNA Dashboard</h2>
      <p style="text-align: center; color: var(--text-muted); margin-bottom: 48px;">Visualizing your cinematic
        fingerprints.</p>

      <!-- Redesigned Bento Grid -->
      <div class="dna-bento-grid">

        <!-- Primary Archetype (The Hero Piece) -->
        <div class="dna-tile dna-hero" id="archetype-container">
          <div class="dna-hero-inner">
            <div id="archetype-icon-wrapper" class="dna-icon-box">
              <i class="fas fa-crown"></i>
            </div>
            <div class="dna-hero-content">
              <div class="dna-badge-row">
                <span class="dna-badge dna-badge-glow">Primary Archetype</span>
              </div>
              <h3 id="archetype-label" class="dna-title-xl">Discovering...</h3>
              <p id="archetype-description" class="dna-desc">Analyzing your cinematic soul to uncover your unique
                profile.</p>
              <div id="archetype-traits" class="dna-traits-row"></div>
            </div>
          </div>
        </div>

        <!-- Quick Stats: Favorite Genre -->
        <div class="dna-tile dna-stat">
          <div class="dna-stat-label">Main Genre</div>
          <div id="dna-genre" class="dna-stat-value">-</div>
          <div class="dna-stat-icon"><i class="fas fa-masks-theater"></i></div>
        </div>

        <!-- Quick Stats: Avg Rating -->
        <div class="dna-tile dna-stat">
          <div class="dna-stat-label">Avg Rating</div>
          <div id="dna-avg-rating" class="dna-stat-value">-</div>
          <div class="dna-stat-icon"><i class="fas fa-star"></i></div>
        </div>

        <!-- Intelligent Insights: Behavior Hub -->
        <div class="dna-tile dna-insights" id="trends-container">
          <div class="dna-tile-header">
            <span class="dna-tile-tag">Intelligent Insights</span>
            <h4 class="dna-tile-title">Behavior Hub</h4>
          </div>
          <div class="dna-insight-content">
            <p id="trends-insight" class="dna-insight-text">Analyzing your viewing patterns...</p>
            <div class="dna-sparkline">
              <canvas id="trends-canvas"></canvas>
            </div>
          </div>
        </div>

        <!-- Top Directors -->
        <div class="dna-tile dna-list-tile">
          <div class="dna-tile-header">
            <h4 class="dna-tile-title">Master Directors</h4>
          </div>
          <ul id="dna-directors" class="dna-pill-list"></ul>
        </div>

        <!-- Emotional Distribution -->
        <div class="dna-tile dna-chart-tile">
          <div class="dna-tile-header">
            <h4 class="dna-tile-title">Emotional Spectrum</h4>
          </div>
          <div class="dna-chart-container">
            <canvas id="dna-chart"></canvas>
          </div>
        </div>

        <!-- Comparison / Sharing Block -->
        <div class="dna-tile dna-cta-tile">
          <div class="dna-cta-content">
            <div class="dna-cta-text">
              <h3><i class="fas fa-fingerprint"></i> Taste DNA Sharing</h3>
              <p>Sync your cinematic fingerprints with friends to find perfect co-viewing matches.</p>
            </div>
            <div class="dna-cta-actions">
              <button id="export-taste-btn" class="dna-btn secondary"><i class="fas fa-share-nodes"></i> Export
                DNA</button>
              <button id="compare-taste-btn" class="dna-btn primary"><i class="fas fa-handshake"></i> Compare
                DNA</button>
            </div>
          </div>
        </div>

      </div>
    </div>

    <div style="text-align: center; margin-top: 64px;">
      <button id="generate-share-btn" class="save-btn btn-primary" style="padding: 16px 40px;">
        <i class="fas fa-share-alt"></i> Generate DNA Share Card
      </button>
    </div>

    <canvas id="dna-share-canvas" width="800" height="1200" style="display:none;"></canvas>
    </div>
  </section>

  <!-- Movie Modal -->
  <div id="review-modal" class="modal">
    <div class="modal-content"
      style="max-width: 1100px; width: 95%; padding: 0; overflow: hidden; display: flex; border: 1px solid var(--cin-glass); background: var(--cin-bg-800); position: relative; border-radius: 20px; box-shadow: 0 40px 100px -20px rgba(0, 0, 0, 0.8); flex-direction: row;">

      <!-- Close Button (Always visible at top-right) -->
      <button id="close-modal"
        style="position: absolute !important; z-index: 1000 !important; top: 24px !important; right: 24px !important; left: auto !important; bottom: auto !important; background: rgba(0, 0, 0, 0.8) !important; color: #ffffff !important; width: 44px !important; height: 44px !important; border-radius: 50% !important; border: 2px solid rgba(255, 255, 255, 0.4) !important; display: flex !important; align-items: center !important; justify-content: center !important; cursor: pointer !important; box-shadow: 0 5px 15px rgba(0,0,0,0.5) !important;">
        <i class="fas fa-times" style="font-size: 1.2rem;"></i>
      </button>

      <!-- Left Column: Poster & Media -->
      <div
        style="width: 400px; min-width: 400px; position: relative; border-right: 1px solid var(--cin-glass); display: flex; flex-direction: column;">
        <div style="position: relative; flex: 1; min-height: 500px;">
          <img id="modal-poster" src="" alt="Movie Poster" style="width: 100%; height: 100%; object-fit: cover;">
          <div
            style="position: absolute; inset: 0; background: linear-gradient(to top, var(--cin-bg-900), transparent 70%);">
          </div>
          <!-- Poster Badge -->
          <div style="position: absolute; bottom: 30px; left: 30px;">
            <span class="badge badge-gold" style="font-size: 0.7rem; letter-spacing: 2px;">CINEMATIC MASTERPIECE</span>
          </div>
        </div>

        <!-- Scene Carousel (Media Section) -->
        <div id="modal-carousel"
          style="padding: 20px; background: rgba(0,0,0,0.3); border-top: 1px solid var(--cin-glass); display: block;">
          <h4
            style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1.5px; color: var(--cin-muted); margin-bottom: 15px;">
            Key Scenes</h4>
          <div style="position: relative; overflow: hidden; height: 120px; border-radius: 8px;">
            <div id="carousel-track" style="display: flex; height: 100%; transition: transform 0.5s ease; gap: 10px;">
              <!-- Scenes injected here -->
            </div>
            <button id="carousel-prev" class="carousel-nav" style="left: 5px;"><i
                class="fas fa-chevron-left"></i></button>
            <button id="carousel-next" class="carousel-nav" style="right: 5px;"><i
                class="fas fa-chevron-right"></i></button>
          </div>
          <div id="carousel-dots" style="display: flex; justify-content: center; gap: 6px; margin-top: 12px;"></div>
        </div>
      </div>

      <!-- Right Column: Content -->
      <div
        style="flex: 1; padding: 50px; padding-right: 80px; overflow-y: auto; display: flex; flex-direction: column; gap: 32px; max-height: 85vh; background: linear-gradient(135deg, var(--cin-bg-800) 0%, var(--cin-bg-900) 100%); position: relative;">
        <div style="display: flex; flex-direction: column; gap: 12px;">
          <h2 id="modal-title"
            style="font-size: clamp(2rem, 4vw, 3.5rem); font-family: 'Playfair Display', serif; font-weight: 900; line-height: 1.1; color: #fff; margin: 0;">
            Movie Title</h2>
          <div id="modal-meta-row"
            style="display: flex; gap: 20px; color: var(--cin-muted); font-size: 0.85rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1.5px; align-items: center;">
            <span id="modal-year" style="display: flex; align-items: center; gap: 6px;"><i class="far fa-calendar"></i>
              2024</span>
            <span id="modal-runtime" style="display: flex; align-items: center; gap: 6px;"><i class="far fa-clock"></i>
              120 min</span>
            <span id="modal-rating"
              style="color: var(--cin-accent-2); font-weight: 800; font-size: 1rem; background: rgba(230, 185, 30, 0.1); padding: 4px 10px; border-radius: 4px;">★
              8.5</span>
          </div>
        </div>

        <p id="modal-plot"
          style="font-size: 1.05rem; line-height: 1.8; color: var(--cin-text); opacity: 0.85; font-weight: 400; margin: 0; max-width: 600px;">
          Plot summary goes here. Let the cinematic journey begin.
        </p>

        <!-- Cinematic Metrics -->
        <div style="display: flex; flex-direction: column; gap: 20px;">
          <h4
            style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 2px; color: var(--cin-muted); margin: 0;">
            CineSins DNA Profile</h4>
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px;">
            <div class="stat-card"
              style="text-align: left; background: rgba(255,255,255,0.03); padding: 16px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.05);">
              <p
                style="font-size: 0.65rem; text-transform: uppercase; color: var(--cin-muted); margin-bottom: 8px; font-weight: 700;">
                Emotional</p>
              <div
                style="height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden; margin-top: 10px;">
                <div id="metric-emotional"
                  style="width: 70%; height: 100%; background: var(--cin-velvet); box-shadow: 0 0 10px var(--cin-velvet);">
                </div>
              </div>
            </div>
            <div class="stat-card"
              style="text-align: left; background: rgba(255,255,255,0.03); padding: 16px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.05);">
              <p
                style="font-size: 0.65rem; text-transform: uppercase; color: var(--cin-muted); margin-bottom: 8px; font-weight: 700;">
                Cognitive</p>
              <div
                style="height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden; margin-top: 10px;">
                <div id="metric-cognitive"
                  style="width: 50%; height: 100%; background: var(--cin-accent-2); box-shadow: 0 0 10px var(--cin-accent-2);">
                </div>
              </div>
            </div>
            <div class="stat-card"
              style="text-align: left; background: rgba(255,255,255,0.03); padding: 16px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.05);">
              <p
                style="font-size: 0.65rem; text-transform: uppercase; color: var(--cin-muted); margin-bottom: 8px; font-weight: 700;">
                Comfort</p>
              <div
                style="height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden; margin-top: 10px;">
                <div id="metric-comfort"
                  style="width: 90%; height: 100%; background: var(--cin-accent-1); box-shadow: 0 0 10px var(--cin-accent-1);">
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Review Section -->
        <div
          style="background: rgba(255,255,255,0.03); padding: 24px; border-radius: 12px; border: 1px solid var(--cin-glass); display: flex; flex-direction: column; gap: 16px;">
          <div id="star-container" style="font-size: 1.25rem; color: var(--cin-accent-2); display: flex; gap: 4px;">
          </div>
          <textarea id="review-text" placeholder="Share your cinematic reflection..."
            style="width: 100%; background: none; border: none; color: #fff; font-size: 1rem; resize: none; min-height: 100px; outline: none; padding: 0; line-height: 1.6;"></textarea>
          <div
            style="display: flex; justify-content: space-between; align-items: center; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 12px;">
            <span style="font-size: 0.7rem; color: var(--cin-muted); font-weight: 500;">AI-POWERED SENTIMENT ANALYSIS
              ACTIVE</span>
            <div id="char-count" style="font-size: 0.75rem; color: var(--cin-muted); font-family: monospace;">0/300
            </div>
          </div>
        </div>

        <!-- Actions -->
        <div style="display: flex; gap: 16px; margin-top: auto;">
          <button id="watchlist-btn"
            style="flex: 1; padding: 18px; border-radius: 8px; border: 1px solid var(--cin-glass); background: transparent; color: #fff; cursor: pointer; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 10px; transition: all 0.3s;">
            <i class="fas fa-bookmark"></i> Watchlist
          </button>
          <button id="save-review"
            style="flex: 2; padding: 18px; border-radius: 8px; border: none; background: #ff0000; color: #fff; cursor: pointer; font-weight: 800; text-transform: uppercase; letter-spacing: 2px; box-shadow: 0 10px 20px rgba(255, 0, 0, 0.2); transition: all 0.3s;">
            Confess Sin
          </button>
        </div>
      </div>
    </div>
  </div>
  <!-- Decision Modal (The Spotlight) -->
  <div id="decision-modal" class="modal modal-spotlight">
    <div class="modal-content spotlight-content">
      <button id="close-decision-modal" class="close" title="Close Spotlight"
        style="position: absolute !important; z-index: 1000 !important; top: 24px !important; right: 24px !important; background: rgba(0, 0, 0, 0.8) !important; color: #ffffff !important; width: 44px !important; height: 44px !important; border-radius: 50% !important; border: 2px solid rgba(255, 255, 255, 0.4) !important; display: flex !important; align-items: center !important; justify-content: center !important; cursor: pointer !important; box-shadow: 0 5px 15px rgba(0,0,0,0.5) !important;">
        <i class="fas fa-times" style="font-size: 1.2rem;"></i>
      </button>

      <div class="spotlight-header">
        <span class="badge badge-gold">Intelligence Engine v2</span>
        <h2 class="spotlight-title">The Spotlight</h2>
        <p style="color: var(--cin-muted); font-size: 1.1rem; max-width: 500px; margin: 0 auto;">Zero-scroll discovery.
          Three masterpieces, selected for your current soul-state.</p>
      </div>

      <div class="decision-form spotlight-grid">
        <div class="spotlight-control">
          <label>Mood</label>
          <select id="decision-mood">
            <option value="Comfort">Chill & Comfort</option>
            <option value="Vibing">Stylized & Vibing</option>
            <option value="Good">Critically Acclaimed</option>
            <option value="Exciting">High Octane</option>
            <option value="Thoughtful">Intellectual/Experimental</option>
          </select>
        </div>

        <div class="spotlight-control">
          <label>Time</label>
          <select id="decision-time">
            <option value="90">&lt;= 90 mins</option>
            <option value="120">&lt;= 120 mins</option>
            <option value="999">&gt; 120 mins</option>
          </select>
        </div>

        <div class="spotlight-control">
          <label>Region</label>
          <select id="decision-region">
            <option value="all">Global (Any)</option>
            <option value="indian">Indian</option>
            <option value="east_asia">East Asian</option>
            <option value="european">European Arthouse</option>
          </select>
        </div>

        <div class="spotlight-control">
          <label>Company</label>
          <select id="decision-company">
            <option value="Alone">Just Me</option>
            <option value="Couple">Date Night</option>
            <option value="Family">Family Friendly</option>
          </select>
        </div>
      </div>

      <button id="get-recommendations-btn" class="spotlight-action" style="background: #ff0000; border-radius: 8px;">
        Analyze Sinful DNA
      </button>

      <div class="decision-carousel-wrapper">
        <button id="decision-prev" class="decision-arrow prev" title="Previous Recommendation"><i
            class="fas fa-chevron-left"></i></button>
        <div id="decision-results" class="movie-grid" style="margin-top: 64px; width: 100%; min-height: 400px;"></div>
        <button id="decision-next" class="decision-arrow next" title="Next Recommendation"><i
            class="fas fa-chevron-right"></i></button>
      </div>
    </div>
  </div>



  <!-- Trends Modal -->
  <div id="trends-detail-modal" class="modal"
    style="display: none; align-items: center; justify-content: center; z-index: 10002;">
    <div class="modal-content" style="max-width: 600px; padding: 40px; text-align: left;">
      <button class="close-modal" id="close-trends-modal"
        style="top: 20px; right: 20px; color: #fff; background: none; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
      <h2 style="margin-bottom: 24px;"><i class="fas fa-chart-line"
          style="color: var(--accent-primary); margin-right: 12px;"></i>Long-term Trends</h2>

      <div id="trends-detailed-graph"
        style="height: 200px; background: rgba(255,255,255,0.03); border-radius: 12px; margin-bottom: 32px; position: relative; width: 100%;">
        <canvas id="detailed-trends-canvas" style="width: 100%; height: 100%;"></canvas>
      </div>

      <div class="trends-stats-grid"
        style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 32px;">
        <div>
          <p style="color: var(--text-muted); font-size: 0.8rem; text-transform: uppercase;">Avg Intensity Trend</p>
          <p id="trend-intensity-val" style="font-size: 1.5rem; font-weight: 700;">+0%</p>
        </div>
        <div>
          <p style="color: var(--text-muted); font-size: 0.8rem; text-transform: uppercase;">Cognitive Shift</p>
          <p id="trend-cognitive-val" style="font-size: 1.5rem; font-weight: 700;">+0%</p>
        </div>
      </div>

      <div
        style="background: hsla(0,0%,100%,0.05); padding: 20px; border-radius: 12px; border-left: 4px solid var(--accent-primary);">
        <p id="trends-long-description" style="line-height: 1.6; color: var(--text-secondary);">Your movie habits have
          been evolving. The graph above shows your weekly shifts across key metrics for the last 6 months.</p>
      </div>
    </div>
  </div>

  <footer style="padding: 80px 0; border-top: 1px solid var(--border-light); text-align: center;">
    <p style="color: var(--text-muted); font-size: 0.9rem;">&copy; 2025 CineSins. All Rights Reserved.</p>
    <div style="margin-top: 16px; display: flex; justify-content: center; gap: 24px;">
      <a href="#" style="color: var(--text-muted);"><i class="fab fa-github"></i></a>
      <a href="#" style="color: var(--text-muted);"><i class="fab fa-twitter"></i></a>
      <a href="#" style="color: var(--text-muted);"><i class="fab fa-instagram"></i></a>
    </div>
  </footer>
  <style>
    @keyframes pulse {
      0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(204, 0, 0, 0.4);
      }

      70% {
        transform: scale(1.05);
        box-shadow: 0 0 0 15px rgba(204, 0, 0, 0);
      }

      100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(204, 0, 0, 0);
      }
    }

    .zero-scroll-active {
      overflow: hidden !important;
    }
  </style>

  <!-- Zero Scroll Modal -->
  <div id="zero-scroll-modal" class="modal"
    style="display: none; align-items: center; justify-content: center; z-index: 20000; background: rgba(0,0,0,0.95); backdrop-filter: blur(10px);">
    <div class="modal-content"
      style="max-width: 1000px; width: 95%; padding: 40px; text-align: center; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 20px 50px rgba(0,0,0,0.5);">
      <h2 style="font-size: 2.5rem; margin-bottom: 12px; font-weight: 900; letter-spacing: -1px;">Zero Scroll Selection
      </h2>
      <p style="color: var(--text-muted); margin-bottom: 40px; font-size: 1.1rem;">You are locked into these 3 picks. No
        browsing, just deciding.</p>

      <div id="zero-scroll-results" class="movie-grid"
        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 32px; margin-bottom: 48px;">
        <!-- 3 results here -->
      </div>

      <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
        <button id="zero-scroll-spin-btn" class="btn-primary"
          style="padding: 16px 32px; font-size: 1rem; border-radius: 12px; background: var(--accent-primary);">
          <i class="fas fa-sync-alt"></i> Spin Again
        </button>
        <button id="zero-scroll-exit-btn" class="btn-secondary"
          style="padding: 16px 32px; font-size: 1rem; border-radius: 12px; background: rgba(255,255,255,0.05); color: #fff; border: 1px solid rgba(255,255,255,0.1);">
          Exit Mode
        </button>
      </div>
    </div>
  </div>

  <!-- Taste Comparison Modal -->
  <div id="taste-modal" class="modal">
    <div class="modal-content" style="max-width: 600px;">
      <button id="close-taste-modal" class="close"><i class="fas fa-times"></i></button>
      <h2 class="section-title">Taste Compatibility</h2>

      <div id="taste-input-view">
        <p style="text-align: center; color: var(--text-muted); margin-bottom: 24px;">Paste your friend's Taste Card
          JSON below to see how your cinematic DNAs align.</p>
        <textarea id="friend-taste-json"
          style="height: 150px; font-family: monospace; font-size: 0.8rem; margin-bottom: 20px;"
          placeholder='{"v":1, "name": "...", "metrics": {...}, "genres": {...}}'></textarea>
        <button id="run-comparison-btn" class="save-btn btn-primary" style="width: 100%;">Analyze Match</button>
      </div>

      <div id="taste-result-view" style="display: none;">
        <div style="text-align: center; margin-bottom: 32px;">
          <div id="similarity-circle"
            style="width: 120px; height: 120px; border-radius: 50%; border: 8px solid var(--accent-primary); margin: 0 auto 16px; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: 800; color: #fff;">
            0%
          </div>
          <p id="compatibility-label"
            style="font-weight: 700; color: var(--accent-secondary); text-transform: uppercase; letter-spacing: 2px;">
            SYNCING...</p>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
          <div class="canvas-container"
            style="background: rgba(16, 185, 129, 0.05); border-color: rgba(16, 185, 129, 0.2); padding: 20px;">
            <h4 style="color: #10b981; font-size: 0.9rem; margin-bottom: 12px;"><i class="fas fa-handshake"></i> SHARED
              PASSIONS</h4>
            <ul id="shared-genres-list"
              style="list-style: none; padding: 0; font-size: 0.9rem; color: var(--text-secondary); display: flex; flex-direction: column; gap: 8px;">
            </ul>
          </div>
          <div class="canvas-container"
            style="background: rgba(239, 68, 68, 0.05); border-color: rgba(239, 68, 68, 0.2); padding: 20px;">
            <h4 style="color: #ef4444; font-size: 0.9rem; margin-bottom: 12px;"><i class="fas fa-unite"></i> UNIQUE
              FLAVORS</h4>
            <ul id="divergent-genres-list"
              style="list-style: none; padding: 0; font-size: 0.9rem; color: var(--text-secondary); display: flex; flex-direction: column; gap: 8px;">
            </ul>
          </div>
        </div>

        <button id="back-to-input-btn" class="save-btn" </div>
      </div>
    </div>

    <!-- Onboarding Modal -->
    <div id="onboarding-modal" class="modal"
      style="display: none; align-items: center; justify-content: center; z-index: 30000; background: rgba(0,0,0,0.98); backdrop-filter: blur(20px);">
      <div class="modal-content"
        style="max-width: 550px; padding: 48px; border: 1px solid rgba(0, 194, 204, 0.2); box-shadow: 0 0 40px rgba(0, 194, 204, 0.1);">
        <div id="onboarding-step-intro">
          <div
            style="width: 80px; height: 80px; margin: 0 auto 32px; background: rgba(0, 194, 204, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; color: #00c2cc;">
            <i class="fas fa-fingerprint"></i>
          </div>
          <h2 style="font-size: 2.2rem; margin-bottom: 12px; font-weight: 800; color: #fff;">Find Your Cinematic North.
          </h2>
          <p style="color: var(--text-muted); font-size: 1.1rem; line-height: 1.6; margin-bottom: 40px;">Most apps tell
            you what's popular. CinemaDNA tells you <strong>who you are</strong>. Take our 60-second Personality Test to
            unlock your profile.</p>
          <button id="start-onboarding-btn" class="save-btn btn-primary"
            style="width: 100%; padding: 16px; border-radius: 12px; font-size: 1.1rem;">Start Personality Test</button>
        </div>

        <div id="onboarding-step-quiz" style="display: none; text-align: left;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
            <span id="quiz-progress-text"
              style="font-size: 0.85rem; color: var(--accent-primary); font-weight: 700; text-transform: uppercase; letter-spacing: 1px;">Question
              1 of 5</span>
            <div
              style="width: 100px; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden;">
              <div id="quiz-progress-bar"
                style="width: 20%; height: 100%; background: #00c2cc; transition: width 0.3s ease;"></div>
            </div>
          </div>
          <h3 id="quiz-question" style="font-size: 1.5rem; color: #fff; margin-bottom: 32px; line-height: 1.4;">Do you
            prefer stories grounded in gritty realism or whimsical fantasy?</h3>
          <div id="quiz-options" style="display: flex; flex-direction: column; gap: 16px;">
            <!-- Options injected here -->
          </div>
        </div>

        <div id="onboarding-step-result" style="display: none;">
          <div id="result-archetype-icon" style="font-size: 4rem; color: #00c2cc; margin-bottom: 24px;">
            <i class="fas fa-mask"></i>
          </div>
          <p
            style="color: var(--accent-primary); font-weight: 700; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 8px;">
            Analysis Complete</p>
          <h2 id="result-archetype-label"
            style="font-size: 2.5rem; color: #fff; margin-bottom: 16px; font-weight: 900;">The Intellectual Explorer
          </h2>
          <p id="result-archetype-desc"
            style="color: var(--text-muted); margin-bottom: 32px; line-height: 1.6; font-size: 1.05rem;">You crave
            complexity and hidden meanings, often digging for underground masterpieces.</p>

          <div
            style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 16px; margin-bottom: 40px; border: 1px solid var(--border-light);">
            <p style="font-size: 0.9rem; color: #fff; font-weight: 600; margin-bottom: 8px;"><i class="fas fa-lightbulb"
                style="color: var(--accent-secondary); margin-right: 8px;"></i> Guidance for tonight</p>
            <p style="font-size: 0.9rem; color: var(--text-muted);">Choose <strong>Zero-Scroll Mode</strong> for
              high-confidence, low-regret picks tailored to your profile.</p>
          </div>

          <div style="display: flex; flex-direction: column; gap: 16px;">
            <button id="seed-dna-btn" class="save-btn btn-primary"
              style="width: 100%; padding: 14px; border-radius: 12px;">Seed my CineSins DNA (Add 5 Starters)</button>
            <button id="finish-onboarding-btn"
              style="background: none; border: none; color: var(--text-muted); cursor: pointer; font-size: 0.9rem;">I'll
              add movies manually</button>
          </div>
        </div>
      </div>
    </div>

</body>

</html>